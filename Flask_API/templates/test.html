<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Setting</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    
    <!-- Font Awesome -->
    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    rel="stylesheet"
    />
    <!-- MDB -->
    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.3.0/mdb.min.css"
    rel="stylesheet"
    />
    <link
    href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap5.min.css"
    rel="stylesheet"
    />
    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    rel="stylesheet"
    />
    <script
    type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.3.0/mdb.min.js"
    ></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/dataTables.bootstrap5.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Navbar</a>
          <button
          class="navbar-toggler"
          type="button"
          data-mdb-toggle="collapse"
          data-mdb-target="#navbarTogglerDemo02"
          aria-controls="navbarTogglerDemo03"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <i class="fas fa-bars"></i>
          </button>
          <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Link</a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
              </li>
            </ul>
            <form class="d-flex">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
          </div>
        </div>
      </nav>

      <div class="row">
        <div class="col-4">
            <div class="list-group" id="list-tab" role="tablist">
                <a
                class="list-group-item list-group-item-action active"
                id="list-ud-list"
                data-mdb-toggle="list"
                href="#list-ud"
                role="tab"
                aria-controls="Upload dataset"
                >Upload dataset</a
                >
                <a
                class="list-group-item list-group-item-action"
                id="list-mm-list"
                data-mdb-toggle="list"
                href="#list-mm"
                role="tab"
                aria-controls="Manage model"
                >Manage model</a
                >
                <a
                class="list-group-item list-group-item-action"
                id="list-ams-list"
                data-mdb-toggle="list"
                href="#list-ams"
                role="tab"
                aria-controls="Auto model setting"
                >Auto model setting</a
                >
                <a
                class="list-group-item list-group-item-action"
                id="list-vd-list"
                data-mdb-toggle="list"
                href="#list-vd"
                role="tab"
                aria-controls="View data"
                >View data</a
                >
                <a
                class="list-group-item list-group-item-action"
                id="list-ma-list"
                data-mdb-toggle="list"
                href="#list-ma"
                role="tab"
                aria-controls="Manage account"
                >Manage account</a
                >
                <a
                class="list-group-item list-group-item-action"
                id="list-ul-list"
                data-mdb-toggle="list"
                href="#list-ul"
                role="tab"
                aria-controls="User list"
                >Manage user</a
                >
            </div>
        </div>
        <div class="col-8">
          <div class="tab-content" id="nav-tabContent">
            <div
              class="tab-pane fade show active"
              id="list-ud"
              role="tabpanel"
              aria-labelledby="list-ud-list"
            >
              
              <!-- Tabs navs -->
              <ul class="nav nav-tabs mb-3" id="ex1" role="tablist">
                <li class="nav-item" role="presentation">
                  <a
                    class="nav-link active"
                    id="ex1-tab-1"
                    data-mdb-toggle="tab"
                    href="#ex1-tabs-1"
                    role="tab"
                    aria-controls="ex1-tabs-1"
                    aria-selected="true"
                    >Tab 1</a
                  >
                </li>
                <li class="nav-item" role="presentation">
                  <a
                    class="nav-link"
                    id="ex1-tab-2"
                    data-mdb-toggle="tab"
                    href="#ex1-tabs-2"
                    role="tab"
                    aria-controls="ex1-tabs-2"
                    aria-selected="false"
                    >Tab 2</a
                  >
                </li>
              </ul>
              <!-- Tabs navs -->

              <!-- Tabs content -->
              <div class="tab-content" id="ex1-content">
                <div
                  class="tab-pane fade show active"
                  id="ex1-tabs-1"
                  role="tabpanel"
                  aria-labelledby="ex1-tab-1"
                >
                  <form method="POST" enctype = "multipart/form-data" action = "http://localhost:8000/setting/uploaddata">
                    <div class="row g-2">
                      <div class="col-12">
                        <label class="form-label" for="customFile"><h5>Add data</h5></label>
                        <input type="file" name="uploaded" class="form-control" id="customFile" accept=".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
                      </div>
                      <div class="col-6">
                          <input class="btn btn-primary btn-lg btn-block" type="submit" value="Upload"><br>
                      </div>
                    </div>
                  </form> 
                  <br>
                  <h5>Edit data</h5>
                  <p>Step 1: Download data and edit on excel</p>
                  <a class="btn btn-primary" href="/exceldatadl" role="button">Download</a>
                  <br><br>
                  <form method="POST" enctype = "multipart/form-data" action = "/setting/replacedata">
                    <p>Step 2: Upload edit data to upload form below</p>
                    <div class="row g-2">
                      <div class="col-12">
                        <input type="file" name="uploaded" class="form-control" id="customFile" accept=".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
                      </div>
                      <div class="col-6">
                        <input class="btn btn-primary btn-lg btn-block" type="submit" value="Upload"><br>
                      </div>
                    </div>
                  </form> 
                </div>
                <div class="tab-pane fade" id="ex1-tabs-2" role="tabpanel" aria-labelledby="ex1-tab-2">
                  <form method="POST" enctype = "multipart/form-data" action = "http://localhost:8000/setting/uploaddatatodb">
                    <div class="row g-2">
                      <div class="col-12">
                        <label class="form-label" for="customFile"><h5>Add data</h5></label>
                        <input type="file" name="uploadeddb" class="form-control" id="customFile" accept=".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
                      </div>
                      <div class="col-6">
                          <input class="btn flex btn-primary btn-lg btn-block" type="submit" value="Upload"><br>
                      </div>
                    </div>
                  </form>
                  <br>
                  <h5>Edit data</h5>
                  <p>Step 1: Download data and edit on excel</p>
                  <a class="btn btn-primary" href="/dbdatadl" role="button">Download</a>
                  <br><br>
                  <form method="POST" enctype = "multipart/form-data" action = "http://localhost:8000/setting/editdatatodb">
                    <p>Step 2: Upload edit data to upload form below</p>
                    <div class="row g-2">
                      <div class="col-12">
                        <input type="file" name="uploaded" class="form-control" id="customFile" accept=".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
                      </div>
                      <div class="col-6">
                          <input class="btn btn-primary btn-lg btn-block" type="submit" value="Upload"><br>
                      </div>
                    </div>
                  </form> 
                </div>
              </div>
              <!-- Tabs content -->
            </div>
            
            <div
              class="tab-pane fade"
              id="list-mm"
              role="tabpanel"
              aria-labelledby="list-mm-list"
            >
            
              <!-- Tabs navs -->
              <ul class="nav nav-tabs mb-3" id="ex1" role="tablist">
                <li class="nav-item" role="presentation">
                  <a
                    class="nav-link active"
                    id="ex1-tab-1"
                    data-mdb-toggle="tab"
                    href="#ex1-tabs-1"
                    role="tab"
                    aria-controls="ex1-tabs-1"
                    aria-selected="true"
                    >Model list</a
                  >
                </li>
              </ul>
              <!-- Tabs navs -->

              <!-- Tabs content -->
              <div class="tab-content" id="ex1-content">
                <div
                  class="tab-pane fade show active"
                  id="ex1-tabs-1"
                  role="tabpanel"
                  aria-labelledby="ex1-tab-1"
                >
                  {% for table in model_list %}
                  {% if table[1] == 'db' %}
                    <div class="card">
                      <div class="card-header"></div>
                      <div class="card-body">
                        <h5 class="card-title">{{table[0]}}</h5>
                        <p class="card-text">
                          Model type: {{ table[1] }}<br>
                          Last update: {{ table[2] }}
                        </p>

                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal{{ table[1] }}">
                          Rename
                        </button>
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal2{{ table[1] }}">
                          Update model
                        </button>    
                        

                        <!-- Modal -->
                        <div class="modal fade" id="exampleModal{{ table[1] }}" tabindex="-1" aria-labelledby="exampleModalLabel{{ table[1] }}" aria-hidden="true">
                          <div class="modal-dialog modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel{{ table[1] }}">Rename</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                              </div>

                              <form method="POST" action = "/setting/renamemodel">
                                <div class="modal-body">
                                  <div class="row">
                                    <label for="oldName" class="col-sm-3 col-form-label">Current name</label>
                                    <div class="col-sm-9">
                                      <input type="text" readonly class="form-control-plaintext" id="oldName" name = "oldName" value={{ table[0] }}>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <label for="inputNewName" class="col-sm-3 col-form-label">New name</label>
                                    <div class="col-sm-9">
                                      <input type="text" class="form-control" id="inputNewName" name = "inputNewName">
                                    </div>
                                  </div>
                                </div>
                              
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                  <button class="btn btn-primary" type="submit" id='save'>Save change</button>
                                </div>
                              </form>

                            </div>
                          </div>
                        </div>

                        <!-- Modal -->
                        <div class="modal fade" id="exampleModal2{{ table[1] }}" tabindex="-1" aria-labelledby="exampleModal2Label{{ table[1] }}" aria-hidden="true">
                          <div class="modal-dialog modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModal2Label{{ table[1] }}">Confirm update</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                              </div>

                              <form method="POST" action = "/setting/updatemodeldb">
                                <div class="modal-body">
                                  <div class="row">
                                    <label for="Updatemodel" class="col-sm-3 col-form-label">Model name</label>
                                    <div class="col-sm-9">
                                      <input type="text" readonly class="form-control-plaintext" id="updatemodel" name="updatemodel" value={{ table[0] }}>
                                    </div>
                                  </div>
                                </div>
                              
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                  <button class="btn btn-primary" type="submit" id='update' >Update model</button>
                                </div>
                              </form>

                            </div>
                          </div>
                        </div>
                        
                      </div>
                    </div>
                  
                  {% else %}
                    <div class="card">
                      <div class="card-header"></div>
                      <div class="card-body">
                        <h5 class="card-title">{{table[0]}}</h5>
                        <p class="card-text">
                          Model type: {{ table[1] }}<br>
                          Last update: {{ table[2] }}
                        </p>
                        <form method="POST">
                          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal1{{ table[1] }}">
                            Rename
                          </button>
                          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal3{{ table[1] }}">
                            Update model
                          </button>      
                        </form>
                        <!-- Modal -->
                        <div class="modal fade" id="exampleModal1{{ table[1] }}" tabindex="-1" aria-labelledby="exampleModal1Label{{ table[1] }}" aria-hidden="true">
                          <div class="modal-dialog modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModal1Label{{ table[1] }}">Rename</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                              </div>

                              <form method="POST" action = "/setting/renamemodel">
                                <div class="modal-body">
                                  <div class="mb-3 row">
                                    <label for="oldName" class="col-sm-3 col-form-label">Current name</label>
                                    <div class="col-sm-9">
                                      <input type="text" readonly class="form-control-plaintext" id="oldName" name="oldName" value={{ table[0] }}>
                                    </div>
                                  </div>
                                  <div class="mb row">
                                    <label for="inputNewName" class="col-sm-3 col-form-label">New name</label>
                                    <div class="col-sm-9">
                                      <input type="text" class="form-control" id="inputNewName" name = "inputNewName">
                                    </div>
                                  </div>
                                </div>
                              
                              
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                  <button class="btn btn-primary" type="submit" id='save1'>Save change</button>
                                </div>
                              </form>

                            </div>
                          </div>
                        </div> 

                        <!-- Modal -->
                        <div class="modal fade" id="exampleModal3{{ table[1] }}" tabindex="-1" aria-labelledby="exampleModal3Label{{ table[1] }}" aria-hidden="true">
                          <div class="modal-dialog modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModal3Label{{ table[1] }}">Confirm update</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                              </div>

                              <form method="POST" action = "/setting/updatemodeldataset">
                                <div class="modal-body">
                                  <div class="row">
                                    <label for="Updatemodel" class="col-sm-3 col-form-label">Model name</label>
                                    <div class="col-sm-9">
                                      <input type="text" readonly class="form-control-plaintext" id="updatemodel" name="updatemodel" value={{ table[0] }}>
                                    </div>
                                  </div>
                                </div>
                              
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                  <button class="btn btn-primary" type="submit" id='update' >Update model</button>
                                </div>
                              </form>

                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                    
                  {% endif %}
                {% endfor %}
                </div>
              </div>
              <!-- Tabs content -->
            </div>

            <div
              class="tab-pane fade"
              id="list-ams"
              role="tabpanel"
              aria-labelledby="list-ams-list"
            >
              {% for table in model_list %}
              {% if table[1] == 'db' %}
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">{{table[0]}}</h5>
                    <p class="card-text">
                      Auto model status: {{ automodelconfig }}<br>
                      Last update: {{ table[2] }}
                    </p>
                    {% if automodelconfig == 'off' %}
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#turnonauto">
                      Turn on
                    </button>
                    <!-- Modal -->
                    <div class="modal fade" id="turnonauto" tabindex="-1" aria-labelledby="turnonauto" aria-hidden="true">
                      <div class="modal-dialog modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="turnonauto">Confirm setting</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>

                          <form method="POST" action = "/setting/setautomodel">
                            <div class="modal-body">
                              <div class="row">
                                <div class="col">
                                  Are you want to turn on auto model ?
                                </div>
                              </div>
                              <br>
                              <div class="row">
                                <div class="col-sm-4">Current status:</div>
                                <div class="col-sm-8">
                                  <div class="text-danger">{{ automodelconfig }}</div>
                                </div>
                              </div>
                            </div>
                          
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <button class="btn btn-primary" type="submit" id='save'>Turn on</button>
                            </div>
                          </form>

                        </div>
                      </div>
                    </div>
                    {% elif automodelconfig == 'on' %}
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#turnoffauto">
                      Turn off
                    </button>
                    <!-- Modal -->
                    <div class="modal fade" id="turnoffauto" tabindex="-1" aria-labelledby="turnoffauto" aria-hidden="true">
                      <div class="modal-dialog modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="turnoffauto">Confirm setting</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>

                          <form method="POST" action = "/setting/setautomodel">
                            <div class="modal-body">
                              
                              <div class="row">
                                <div class="col">
                                  Are you want to turn off auto model ?
                                </div>
                              </div>
                              <br>
                              <div class="row">
                                <div class="col-sm-4">Current status:</div>
                                <div class="col-sm-8">
                                  <div class="text-success">{{ automodelconfig }}</div>
                                </div>
                              </div>
                            </div>
                          
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <button class="btn btn-primary" type="submit" id='save'>Turn off</button>
                            </div>
                          </form>

                        </div>
                      </div>
                    </div>
                    {% endif %}    
                    
                  </div>
                </div>
              {% endif %}
            {% endfor %}
            </div>

            <div
              class="tab-pane fade"
              id="list-vd"
              role="tabpanel"
              aria-labelledby="list-vd-list"
            >
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="excelview-tab" data-bs-toggle="tab" data-bs-target="#excelview" type="button" role="tab" aria-controls="excelview" aria-selected="true">Excel dataset</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="dbview-tab" data-bs-toggle="tab" data-bs-target="#dbview" type="button" role="tab" aria-controls="dbview" aria-selected="false">Database</button>
                </li>
              </ul>

              <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="excelview" role="tabpanel" aria-labelledby="excelview-tab">
                  <br>
                  <div class="overflow-auto">
                    {% for table in tables %}
                      {{ table|safe }}
                    {% endfor %}
                  </div>
                  
                </div>

                <div class="tab-pane fade" id="dbview" role="tabpanel" aria-labelledby="dbview-tab">
                  <br>
                  <div class="overflow-auto">
                    {% for table in tables1 %}
                      {{ table|safe }}
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>

            <div
                class="tab-pane fade"
                id="list-ma"
                role="tabpanel"
                aria-labelledby="list-ma-list"
            >
              {% for user1 in user_list %}
              {% if user1[0] == uid %}
                <div class="card">
                  
                  <div class="card-body">
                    <h5 class="card-title">{{user1[1]}}</h5>
                    <p class="card-text">
                      User ID: {{ user1[0] }}<br>
                      Permission: {{ user1[2] }}
                    </p>
                    {% if user1[0] != 0 %}
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#ModalLabel3edit{{user1[1]}}">
                      Change username
                    </button>
                    {% endif %}
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#ModalLabeledit{{user1[1]}}">
                      Change password
                    </button>
                    {% if user1[1] != "admin"%}
                    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#ModalLabel2edit{{user1[1]}}">
                      Delete account
                    </button> 
                    {% endif %}   

                    <!-- Modal -->
                    <div class="modal fade" id="ModalLabel3edit{{user1[1]}}" tabindex="-1" aria-labelledby="ModalLabel3edit{{user1[1]}}" aria-hidden="true">
                      <div class="modal-dialog modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="ModalLabel3edit{{user1[1]}}">Edit user name</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>

                          <form method="POST" action = "/setting/editaccountuname">
                            <div class="modal-body">
                              <div class="mb row">
                                <label for="inputNewuname" class="col-sm-5 col-form-label">New username</label>
                                <div class="col-sm-7">
                                  <input type="text" class="form-control" id="inputNewuname" name = "inputNewuname">
                                </div>
                                <label for="inputpwd" class="col-sm-5 col-form-label">Password</label>
                                <div class="col-sm-7">
                                  <input type="text" class="form-control" id="inputpwd" name = "inputpwd" placeholder="Password">
                                </div>
                              </div>
                            
                              <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button class="btn btn-primary" type="submit" id='delete' >Confirm</button>
                              </div>
                            </div>
                          </form>

                        </div>
                      </div>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="ModalLabeledit{{user1[1]}}" tabindex="-1" aria-labelledby="ModalLabeledit{{user1[1]}}" aria-hidden="true">
                      <div class="modal-dialog modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="ModalLabeledit{{user1[1]}}">Change password</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>

                          <form method="POST" action = "/setting/editaccountpwd">
                            <div class="modal-body">
                              <div class="mb row">
                                <label for="inputoldpwd" class="col-sm-5 col-form-label">Old password</label>
                                <div class="col-sm-7">
                                  <input type="text" class="form-control" id="inputoldpwd" name = "inputoldpwd" placeholder="Password">
                                </div>
                              </div>
                              <div class="mb row">
                                <label for="inputNewpwd" class="col-sm-5 col-form-label">New password</label>
                                <div class="col-sm-7">
                                  <input type="text" class="form-control" id="inputNewpwd" name = "inputNewpwd" placeholder="Password">
                                </div>
                              </div>
                            </div>
                          
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <button class="btn btn-primary" type="submit" id='save'>Save change</button>
                            </div>
                          </form>

                        </div>
                      </div>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="ModalLabel2edit{{user1[1]}}" tabindex="-1" aria-labelledby="ModalLabel2edit{{user1[1]}}" aria-hidden="true">
                      <div class="modal-dialog modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="ModalLabel2edit{{user1[1]}}">Confirm delete account</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>

                          <form method="POST" action = "/setting/deleteyouraccount">
                            <div class="modal-body">
                              <div class="row">
                                <label for="deleteuser" class="col-sm-5 col-form-label">User name</label>
                                <div class="col-sm-7">
                                  <input type="text" readonly class="form-control-plaintext" id="deleteuser" name="deleteuser" value={{ user1[1] }}>
                                </div>
                                <label for="deleteuserid" class="col-sm-5 col-form-label">User ID</label>
                                <div class="col-sm-7">
                                  <input type="text" readonly class="form-control-plaintext" id="deleteuserid" name="deleteuserid" value={{ user1[0] }}>
                                </div>
                                <label for="inputpwd" class="col-sm-5 col-form-label">Your account password</label>
                                <div class="col-sm-7">
                                  <input type="text" class="form-control" id="inputpwd" name = "inputpwd" placeholder="Password">
                                </div>
                              </div>
                            </div>
                          
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <button class="btn btn-primary" type="submit" id='delete' >Delete</button>
                            </div>
                          </form>

                        </div>
                      </div>
                    </div>

                    
                  </div>
                </div>
                {% else %}
                {% endif %}
              {% endfor %}
            </div>

            <div
                class="tab-pane fade"
                id="list-ul"
                role="tabpanel"
                aria-labelledby="list-ul-list"
            >
              <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#adduser">
                <i class="fa fa-user-plus" aria-hidden="true"></i> Add user
              </button>
              <!-- Modal -->
              <div class="modal fade" id="adduser" tabindex="-1" aria-labelledby="adduser" aria-hidden="true">
                <div class="modal-dialog modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="adduser">Add new user</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <form method="POST" action = "/setting/adduser">
                      <div class="modal-body">
                        <div class="mb row">
                          <label for="inputuname" class="col-sm-5 col-form-label">Username</label>
                          <div class="col-sm-7">
                            <input type="text" class="form-control" id="inputuname" name = "inputuname">
                          </div>
                          <label for="inputpwd" class="col-sm-5 col-form-label">Password</label>
                          <div class="col-sm-7">
                            <input type="text" class="form-control" id="inputpwd" name = "inputpwd" placeholder="Password">
                          </div>
                          <label for="inputpermission" class="col-sm-5 col-form-label">Permission</label>
                          <div class="col-sm-7">
                            <select class="form-select" id="inputpermission" name ="inputpermission" required>
                              <option value="1">User</option>
                              <option value="0">Admin</option>
                            </select>
                          
                          </div>
                          <label for="inputadminpwd" class="col-sm-5 col-form-label">Admin password</label>
                          <div class="col-sm-7">
                            <input type="text" class="form-control" id="inputadminpwd" name = "inputadminpwd" placeholder="Password">
                          </div>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button class="btn btn-primary" type="submit" id='delete' >Confirm</button>
                      </div>                 
                    </form>

                  </div>
                </div>
              </div>


              {% for user in user_list %}
                {% if user[0] != uid %}
                  <div class="card">
                    <div class="card-header"></div>
                    <div class="card-body">
                      <h5 class="card-title">{{user[1]}}</h5>
                      <p class="card-text">
                        User ID: {{ user[0] }}<br>
                        Permission: {{ user[2] }}
                      </p>
                      <div class="row">
                        <div class="col">
                          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#ModalLabel{{user[1]}}">
                            Change permission
                          </button>
                        </div>
                        <div class="col d-flex justify-content-end">                              
                          {% if user[1] != "admin"%}
                          <button type="button" class="btn btn-danger fa fa-trash" data-bs-toggle="modal" data-bs-target="#ModalLabel2{{user[1]}}">
                            
                          </button>
                          {% endif%}   
                        </div>
                      </div>

                      

                      <!-- Modal -->
                      <div class="modal fade" id="ModalLabel{{user[1]}}" tabindex="-1" aria-labelledby="ModalLabel{{user[1]}}" aria-hidden="true">
                        <div class="modal-dialog modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="ModalLabel{{user[1]}}">Change {{ user[1] }}'s permission</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <form method="POST" action = "/setting/edituserpermission">
                              <div class="modal-body">
                                <div class="row">
                                  <label for="user" class="col-sm-5 col-form-label">User name</label>
                                  <div class="col-sm-7">
                                    <input type="text" readonly class="form-control-plaintext" id="user" name = "user" value={{ user[1] }}>
                                  </div>
                                  <label for="user" class="col-sm-5 col-form-label">User name</label>
                                  <div class="col-sm-7">
                                    <input type="text" readonly class="form-control-plaintext" id="uid" name = "uid" value={{ user[0] }}>
                                  </div>
                                  <label for="oldName" class="col-sm-5 col-form-label">Current permission</label>
                                  <div class="col-sm-7">
                                    <input type="text" readonly class="form-control-plaintext" id="oldName" name = "oldName" value={{ user[2] }}>
                                  </div>
                                </div>
                                <div class="row">
                                  <label for="inputNewpermission" class="col-sm-5 col-form-label">New permission</label>
                                  <div class="col-sm-7">
                                    <select class="form-select" id="inputNewpermission" name ="inputNewpermission" required>
                                      <option value="1">User</option>
                                      <option value="0">Admin</option>
                                    </select>
                                    
                                  </div>
                                  <label for="inputpwd" class="col-sm-5 col-form-label">Admin password</label>
                                  <div class="col-sm-7">
                                    <input type="text" class="form-control" id="inputpwd" name = "inputpwd" placeholder="Password">
                                  </div>
                                </div>
                              </div>
                            
                              <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button class="btn btn-primary" type="submit" id='save'>Save change</button>
                              </div>
                            </form>

                          </div>
                        </div>
                      </div>

                      <!-- Modal -->
                      <div class="modal fade" id="ModalLabel2{{user[1]}}" tabindex="-1" aria-labelledby="ModalLabel2{{user[1]}}" aria-hidden="true">
                        <div class="modal-dialog modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="ModalLabel2{{user[1]}}">Confirm delete user: {{user[1]}}</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <form method="POST" action = "/setting/deleteuser">
                              <div class="modal-body">
                                <div class="row">
                                  <label for="deleteusername" class="col-sm-5 col-form-label">User name</label>
                                  <div class="col-sm-7">
                                    <input type="text" readonly class="form-control-plaintext" id="deleteusername" name="deleteusername" value={{ user[1] }}>
                                  </div>
                                  <label for="deleteuserid" class="col-sm-5 col-form-label">User ID</label>
                                  <div class="col-sm-7">
                                    <input type="text" readonly class="form-control-plaintext" id="deleteuserid" name="deleteuserid" value={{ user[0] }}>
                                  </div>
                                  <label for="inputpwd" class="col-sm-5 col-form-label">Admin password</label>
                                  <div class="col-sm-7">
                                    <input type="text" class="form-control" id="inputpwd" name = "inputpwd" placeholder="Password">
                                  </div>
                                </div>
                              </div>
                            
                              <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button class="btn btn-primary" type="submit" id='delete' >Delete</button>
                              </div>
                            </form>

                          </div>
                        </div>
                      </div>
                      
                    </div>
              

            </div>
            {% else %}

            {% endif %}
          {% endfor %}
            </div>
          </div>
        </div>
      </div>
</body>
</html>
